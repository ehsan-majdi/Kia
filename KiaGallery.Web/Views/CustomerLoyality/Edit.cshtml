
@{
    ViewBag.Title = "Edit";
}
<style>
    body {
        background-attachment: fixed;
    }

    .submit-form {
        background-color: rgba(134, 119, 111,0.4);
        width: 500px;
        -webkit-box-shadow: 0px 0px 71px -16px rgba(0,0,0,0.73);
        -moz-box-shadow: 0px 0px 71px -16px rgba(0,0,0,0.73);
        box-shadow: 0px 0px 71px -16px rgba(0,0,0,0.73);
        margin: 0 auto;
        height: 603px;
        position: absolute;
        top: 10%;
        left: 0;
        right: 0;
        bottom: 25%;
        display: none;
    }

    label {
        width: 100px;
        z-index: -1;
    }

    input {
        margin: 10px 30px;
        border-radius: 5px;
        z-index: -1;
    }

    .btn-purchase {
        border-radius: 5px;
        width: 200px;
        font-size: 20px;
    }

    .active-buy {
        background-color: #8bc34a;
    }


    .active-reclamation {
        background-color: #f44336;
    }

    #buy:hover {
        background-color: #8bc34a;
        border-color: #8bc34a;
    }


    #reclamation:hover {
        background-color: #f44336;
        border-color: #f44336;
    }

    .input-purchase-reclamation {
        display: none;
    }

    .background {
        width: 100%;
        opacity: 0.2;
        height: auto;
        margin: -90px auto;
        -webkit-filter: blur(3px);
    }

    .hexa-img {
        max-width: 250px;
    }

    .first-image {
        position: absolute;
        top: 0;
        right: 0;
    }

    .second-image {
        position: absolute;
        top: 0;
        left: 0;
    }

    .main-form {
        position: relative;
    }

    #rial {
        position: absolute;
        right: 439px;
        top: 397px;
    }

    #buy {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100px;
        height: 100px;
        transition: all ease 1s;
        border-radius: 50%;
        border: 5px solid #808080;
        font-size: 20px;
    }

    #reclamation {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100px;
        height: 100px;
        transition: all ease 1s;
        border-radius: 50%;
        border: 5px solid #808080;
        font-size: 20px;
    }
    /*استایل دکمه*/
    .btnStyle {
        color: #000;
        border: none;
        position: relative;
        font-size: 1.6em;
        padding: 0 2em;
        cursor: pointer;
        transition: 800ms ease all;
        outline: none;
        background-color: #86776f;
        width: 150px;
        display: none;
    }


        .btnStyle:hover {
            background: #fff;
            color: green;
        }

        .btnStyle:before, .btnStyle:after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            height: 2px;
            width: 0;
            background: green;
            transition: 400ms ease all;
        }

        .btnStyle:after {
            right: inherit;
            top: inherit;
            left: 0;
            bottom: 0;
        }

        .btnStyle:hover:before, .btnStyle:hover:after {
            width: 100%;
            transition: 800ms ease all;
        }

    @@media screen and (max-width:360px) {
        .container {
            width: 100%;
        }

        .hexa-img {
            max-width: 107px;
        }

        .submit-form {
            max-width: 200px;
            top: 128px;
            height: 400px !important;
        }

        span {
            display: none;
        }

        label {
            display: inline-block;
            width: 75px;
        }

        input {
            max-width: 200px !important;
            margin: 0 auto;
            display: inline-block;
        }

        #btnSave {
            display: none;
            top: 245px;
        }

        .background {
            background-image: unset;
        }
    }

    @@media screen and (max-width:375px) {
        .container {
            width: 100%;
        }

        .hexa-img {
            max-width: 107px;
        }

        .submit-form {
            max-width: 200px;
            top: 128px;
            height: 400px !important;
        }

        span {
            display: none;
        }

        label {
            display: inline-block;
            width: 75px;
        }

        input {
            max-width: 200px !important;
            margin: 0 auto;
            display: inline-block;
        }

        #btnSave {
            display: none;
            top: 245px;
        }

        .background {
            background-image: unset;
        }
    }

    @@media screen and (max-width:414px) {
        .container {
            width: 100%;
        }

        .hexa-img {
            max-width: 107px;
        }

        .submit-form {
            max-width: 200px;
            top: 128px;
            height: 400px !important;
        }

        span {
            display: none;
        }

        label {
            display: inline-block;
            width: 75px;
        }

        input {
            max-width: 200px !important;
            margin: 0 auto;
            display: inline-block;
        }

        #btnSave {
            display: none;
            top: 245px;
        }

        .background {
            background-image: unset;
        }
    }

    @@media screen and (max-width:768px) {
        .container {
            width: 100%;
        }

        label {
            display: inline-block;
            width: 75px;
        }

        input {
            width: 165px !important;
        }

        .submit-form {
            display: none;
            width: 340px;
            height: 500px;
            margin: 0 auto;
        }

        .background {
            margin: 0 auto;
        }

        .hexa-img {
            width: 144px;
        }

        #buy {
            width: 74px;
            height: 74px;
            font-size: 13px;
        }

        #reclamation {
            width: 74px;
            height: 74px;
            font-size: 13px;
        }

        span {
            display: none;
        }

        #btnSave {
            display: block;
            margin: 100px auto;
        }
    }

    .parent {
        background-color: deepskyblue;
        border-radius: 10px;
        color: white;
        font-size: 10px;
        border: 1px solid deepskyblue;
        width: 63px !important;
        display: inline-block;
    }

    .delete-code {
        cursor: pointer;
        font-size: 10px;
        margin-right: 2px
    }

    #appendTo {
        background-color: white;
        width: 209px;
        position: absolute;
        height: 80px;
        border-radius: 2px 2px 2px 2px;
        right: 197px;
        top: 425px;
    }

    .icon-1 {
        cursor: pointer;
    }

    .icon-2 {
        cursor: pointer;
    }
</style>
@*<div class="text-center">
        <span class="Reminder" style="display: inline; opacity: 0.955053;"> <i style="font-size: 20px; color: orange; display: inline-block; opacity: 0.955053;" class="fa fa-exclamation-circle  Reminder"></i></span>
        <p>
            با توجه به نیاز مجموعه کیاگالری برای سنجش میزان رضایت مشتریان از این مجموعه از این پس  <b>پیامک های نظر سنجی</b> بعد از ثبت فاکتورها به صورت خودکار برای مشتریان ارسال میگردد.
            لطفا در ایجاد <b>اطلاعات</b> مشتری دقت نمایید.
        </p>

    </div>*@
<a href="/customerLoyality/factor" class="button-new btn btn-info" style="position:absolute;background-color:#1e87f0">
    <i class="fa fa-list fa-18px"></i>
    صفحه فاکتورها
</a>

<div class="container">

    <div class="main-form">
        <div class="text-center" style="color:rgba(0,154,0,0.7);position:absolute;right:calc(50% - 121px)">
            <h4 id="successMessage" style="display:none"><b>ثبت اطلاعات با موفقیت انجام شد.</b></h4>
        </div>
        <img src="/Content/Image/image-opa.jpg" class="background" />
        <div class="first-image">
            <img src="~/Content/Image/hexa.png" class="hexa-img  " />
            <button id="buy">خرید</button>
        </div>
        <div class="second-image">
            <img src="~/Content/Image/hexa.png" class="hexa-img " />
            <button id="reclamation">مرجوعی</button>
        </div>
        <form id="form">
            <div class="submit-form">
                <input id="hiddenId" type="hidden" name="hiddenId" />
                <input id="factorId" type="hidden" name="id" />
                <input id="hiddenPurchaseType" type="hidden" name="purchaseType" />
                <div class="form-inline text-center">
                    <div>
                        <label id="returnSearch" for="phoneNumber">جستجو:</label>
                        <label id="buySearch" for="phoneNumber">شماره همراه:</label>
                        <input data-toggle="tooltip" type="text" id="phoneNumber" class="form-control number-only focus" name="phoneNumber" placeholder="" data-validate="mobileNumberCL" data-placement="right" /><i class="clear-form hide-show fa fa-close"></i>
                    </div>
                </div>
                <div class="form-inline text-center input-purchase-buy">
                    <div>
                        <label class="hide-show">نام:</label>
                        <input type="text" id="firstName" class="form-control hide-show focus" name="firstName" placeholder="نام " disabled /><i class=" icon-1 hide-show fa fa-pencil"></i>
                    </div>
                </div>
                <div class="form-inline text-center input-purchase-buy ">
                    <div>
                        <label class="hide-show">نام خانوادگی:</label>
                        <input type="text" id="lastName" class="form-control hide-show focus" name="lastName" placeholder="نام خانوادگی" disabled /><span class="icon-2 hide-show fa fa-pencil"></span>
                    </div>
                </div>
                <div class="form-inline text-center input-purchase-buy buyDate">
                    <label class="hide-show">تاریخ:</label>
                    <input autocomplete="off" id="persianDate" class="form-control date hide-show focus" name="persianDate" placeholder="تاریخ" data-validate="required" />
                </div>
                <div class="form-inline text-center returnDate">
                    <label class="hide-show">تاریخ مرجوع:</label>
                    <input autocomplete="off" id="persianReturnDate" class="form-control date hide-show focus" name="persianReturnDate" placeholder="تاریخ" data-validate="" />
                </div>
                <div class="form-inline text-center factorWeight">
                    <label class="hide-show">وزن فاکتور:</label>
                    <input type="text" name="factorWeight" class="form-control hide-show focus" placeholder="وزن فاکتور" data-validate="" />
                </div>
                <div class="form-inline text-center">
                    <label class="hide-show">مبلغ فاکتور(ریال):</label>
                    <input type="text" name="factorPrice" class="form-control money-separator hide-show focus" placeholder="ریال" data-validate="required" />
                </div>
                <div class="form-inline text-center ">
                    <label class="hide-show">شماره فاکتور:</label>
                    <input type="text" name="factorNumber" class="form-control hide-show number-only focus" placeholder="شماره فاکتور" data-validate="required" />
                </div>
                <div class="form-inline text-center ">
                    <label class="hide-show">کد کالا:</label>
                    <input dir="ltr" id="productCode" type="text" name="" class="form-control hide-show number-only focus" data-validate="" />
                    <div id="appendTo" class="hide-show">
                    </div>
                </div>
            </div>
        </form>

        <div class="text-center">
            <button id="btnSave" class="btnStyle" style="display:none;">ثبت</button>
        </div>

    </div>
</div>


@section Scripts {
    <script type="text/html" id="mytemplate">

    </script>
    <script type="text/javascript">
        var id = @(ViewBag.Id != null ? ViewBag.Id : 0);

        $("#factorId").val(id)

        $(document).ready(function () {
            //setInterval(blinker, 1000);

            $('.focus').keydown(function (e) {
                if (e.which === 13) {
                    $(this).closest(".form-inline").next('.form-inline').find(".focus").focus();
                }
            });
            $('[data-toggle="tooltip"]').tooltip();
            $(".clear-form").on("click", function () {
                $(".hide-show").hide();
                $("#phoneNumber").prop("disabled", false);
                $("#productCode").val("");
                $("#firstName").val("");
                $("#lastName").val("");
                $("#phoneNumber").val("");
                $("input[name=factorNumber]").val("");
                $("input[name=factorPrice]").val("");
                $(".parent").remove();
                $('input[data-toggle="tooltip"]').tooltip("enable")
            })

            $(".hide-show").hide();
            $(".icon-1").click(function () {
                $("#firstName").prop("disabled", false);
            });
            $(".icon-2").click(function () {
                $("#lastName").prop("disabled", false);
            });
            $("#productCode").on("keypress", function (e) {
                var code = e.which;

                if (code == 13) {
                    if ($(this).val().length == 8 || $(this).val().length == 4) {
                        e.preventDefault();
                        var code = "<span class=\" parent \" >" + $(this).val() + "<i class=\" delete-code fa fa-close \" ></i><input type=\"hidden\" name=\"productCode\" value=\"" + $(this).val() + "\" /></span>";
                        $("#appendTo").append(code)
                        $(".delete-code").on("click", function () {
                            $(this).parent(".parent").remove();

                        });
                        $(this).val("")
                    }
                }
            });
            $("#phoneNumber").on("keyup", function (e) {
                var code = e.which;
                if (code == 8) e.preventDefault();
                if (code == 8) {
                    $(".hide-show").hide(100);

                    $("#firstName").val("");
                    $("#lastName").val("");
                    $("#firstName").prop("disabled", true);
                    $("#lastName").prop("disabled", true);
                }
            });
            $(".date").pDatepicker({
                format: 'YYYY/MM/DD',
                autoClose: true,

            });
            $("#buy").click(function () {
                $(".buyDate").show();
                $(".returnDate").hide();
                $(".factorWeight").show();
                $(".submit-form").show(200);
                $("#btnSave").show();
                $(".input-purchase-buy").show();
                $("#reclamation").removeClass("active-reclamation");
                $(this).addClass("active-buy");
                $("#returnSearch").hide();
                $("#buySearch").show();
                productAutoCompelete()
                $("#phoneNumber").attr("title", "لطفا پس از وارد کرن شماره همراه دکمه Enter را بزنید.").tooltip("fixTitle");
                $('[data-toggle="tooltip"]').tooltip();
            });

            $("#reclamation").click(function () {
                $(".submit-form").show(200);
                $("#btnSave").show();
                $(".buyDate").hide();
                $(".factorWeight").hide();
                $(".returnDate").show();
                //$(".input-purchase-buy").hide();
                $(".input-purchase-reclamation").show();
                $("#buy").removeClass("active-buy");
                $(this).addClass("active-reclamation");
                $("#returnSearch").show();
                $("#buySearch").hide();
                $("#phoneNumber").prop("disabled", false);
                $("#productCode").val("");
                $("#firstName").val("");
                $("#lastName").val("");
                $("#phoneNumber").val("");
                $("input[name=factorNumber]").val("");
                $("input[name=factorPrice]").val("");
                $(".parent").remove();
                //$("#phoneNumber").attr("title", "جسجوی کد کالا یا شماره همراه یا شماره فاکتور.").tooltip("fixTitle");
                $('[data-toggle="tooltip"]').tooltip();

                searchAutoCompelete()
            });


            load();
            getCustomerInfo();

            $("#btnSave").on("click", function (event) {
                var entity = getEntity("#form");
                entity.productCode = [];


                $("input[name=productCode]").each(function (i, e) {
                    entity.productCode.push($(e).val());
                });

                entity.productCode = entity.productCode.join("-");

                if (!entity.phoneNumber) {
                    callbackAlert("شماره همراه وارد نشده است.", function () {
                        $("#phoneNumber").focus();
                    });
                    return;
                }
                if (checkForm("#form")) {
                    if ($("#buy").hasClass("active-buy")) {
                        entity.purchaseType = 0;

                        if (!entity.firstName) {
                            callbackAlert("نام مشتری وارد نشده است.", function () {
                                $("#firstName").focus();
                            });
                            $("#firstName").prop("disabled", false);
                            return;
                        }
                        if (!entity.lastName) {
                            callbackAlert("نام خانوادگی مشتری وارد نشده است.", function () {
                                $("#lastName").focus();

                            });
                            $("#lastName").prop("disabled", false);
                            return;
                        }
                        if ($("#appendTo").find(".parent").length == 0) {
                            callbackAlert("کد کالا وارد نشده است.", function () {
                                $("#productCode").focus();
                            });
                            return;
                        }
                    }
                    else {
                        entity.purchaseType = 1;
                    }
                    if (id > 0) {
                        loader(true);
                        $.ajax({
                            method: "POST",
                            url: "/customerloyality/save",
                            data: entity,
                            success: function (response) {
                                if (response.status == 200) {
                                    //callbackAlert(response.message, function () {
                                    //});
                                    location.href = "/customerLoyality/factor"
                                }
                                else {
                                    alert(response.message);
                                }
                                loader(false);
                            }
                        });
                    }
                    else {

                        loader(true);
                        $.ajax({
                            method: "POST",
                            url: "/customerloyality/save",
                            data: entity,
                            success: function (response) {
                                if (response.status == 200) {
                                    //callbackAlert(response.message, function () {
                                    //});
                                    $("input[type=text]").val("");
                                    $("#successMessage").show()
                                    $("#successMessage").text(response.message);
                                    setTimeout(function () {
                                        $('#successMessage').hide();
                                    }, 3000);
                                    $(".hide-show").hide();
                                    $("#phoneNumber").prop("disabled", false)
                                    $('input[data-toggle="tooltip"]').tooltip("hide")
                                    $('input[data-toggle="tooltip"]').tooltip("enable")
                                    $(".parent").remove();
                                }
                                else {
                                    alert(response.message)

                                }
                                loader(false);
                            }
                        });
                    }

                }
            });


        });
        function productAutoCompelete() {

            $("#phoneNumber").on("focus", function () {
                $(this).autocomplete({
                    focus: function (event, ui) {
                        return false;
                    },
                    select: function (event, ui) {
                        $(this).val(ui.item.phoneNumber);
                        $("#firstName").val(ui.item.firstName)
                        $("#lastName").val(ui.item.lastName)
                        $("#firstName").prop("disabled", true);
                        $("#lastName").prop("disabled", true);
                        $(".hide-show").show(100);
                        $("#phoneNumber").prop("disabled", true);
                        $('input[data-toggle="tooltip"]').tooltip("hide")
                        $('input[data-toggle="tooltip"]').tooltip("disable")
                        return false;
                    },
                    source: function (request, response) {

                        $.ajax({
                            url: "/customerLoyality/CustomerInfoAutoCompelete",
                            data:
                            {
                                term: request.term,
                            },
                            success: function (data) {
                                response(data);
                            }
                        });
                    },
                    minLength: 3,
                    open: function () {
                        $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
                    },
                    close: function () {
                        $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
                    }
                }).autocomplete("instance")._renderItem = function (ul, item) {
                    if (item.phoneNumber) {
                        return $("<li>")
                            .append("<div><span class=\"auto-complete-item\"> " + "نام: " + item.firstName + " <br/> " + "نام خانوادگی: " + (item.lastName ? item.lastName : '-') + "<br/>" + "شماره تلفن: " + (item.phoneNumber ? item.phoneNumber : '-') + "</span ></div > ")
                            .appendTo(ul);
                    }
                    //else {
                    //    return $("<li>")
                    //        .append("<div><span class=\"auto-complete-item\">" + item.firstName + "<br/>" + item.firstName + "</span></div>")
                    //        .appendTo(ul);
                    //}
                };
            })

        }
        function searchAutoCompelete() {

            $("#phoneNumber").on("focus", function () {
                $(this).autocomplete({
                    focus: function (event, ui) {
                        return false;
                    },
                    select: function (event, ui) {
                        var element = this;

                        if (!ui.item.expired) {
                            confirmMessage("این فاکتور اکنون منقضی شده،آیا میخواهید ادامه بدهید؟", function () {
                                operation(element,ui)
                            })
                        }
                        else {
                            operation(element,ui)
                        }
                        return false;
                    },
                    source: function (request, response) {

                        $.ajax({
                            url: "/customerLoyality/searchAutoCompelete",
                            data:
                            {
                                term: request.term,
                            },
                            success: function (data) {
                                response(data);
                            }
                        });
                    },
                    minLength: 3,
                    open: function () {
                        $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
                    },
                    close: function () {
                        $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
                    }
                }).autocomplete("instance")._renderItem = function (ul, item) {
                    if (item.phoneNumber) {
                        return $("<li>")
                            .append("<div><span>" + "کد کالا: " + (item.productCode ? item.productCode : '-') + "</span><br/><span>" + "شماره فاکتور: " + item.factorNumber + " " + item.branchName + "</span><br/><span class=\"auto-complete-item\"> " + "نام: " + item.firstName + " " + (item.lastName ? item.lastName : '-') + "<br/>" + " " + (item.persianDate ? item.persianDate : '-') + "</span ></div > ")
                            .appendTo(ul);
                    }
                    //else {
                    //    return $("<li>")
                    //        .append("<div><span class=\"auto-complete-item\">" + item.firstName + "<br/>" + item.firstName + "</span></div>")
                    //        .appendTo(ul);
                    //}
                };
            })

        }
        function operation(element,ui) {
            $(element).val(ui.item.phoneNumber);
            $("#hiddenId").val(ui.item.id)
            $("#firstName").val(ui.item.firstName)
            $("#lastName").val(ui.item.lastName)
            $("input[name=factorNumber]").val(ui.item.factorNumber)
            $("#firstName").prop("disabled", true);
            $("#lastName").prop("disabled", true);
            $(".hide-show").show(100);
            $("#phoneNumber").prop("disabled", true);
            $('input[data-toggle="tooltip"]').tooltip("hide")
            $('input[data-toggle="tooltip"]').tooltip("disable")
            if ($("#reclamation").hasClass("active-reclamation")) {
                $("input[name=factorNumber]").prop("disabled", true);
            }
            else{
                $("input[name=factorNumber]").prop("disabled", false);

            }
        }
        function getCustomerInfo() {

            $("#phoneNumber").keypress(function (e) {
                if ($("#buy").hasClass("active-buy")) {
                        $("input[name=factorNumber]").prop("disabled", false);
                    if (e.which == 13 && $(this).val().length == 8 || $(this).val().length == 11) {
                        $("#phoneNumber").prop("disabled", true);
                        e.preventDefault();
                        $(".hide-show").show(100);
                        var phoneNumber = $(this).val();
                        loader(true);
                        $.ajax({
                            method: "POST",
                            url: "/customerloyality/getcustomerinfo",
                            data: { phoneNumber: phoneNumber },
                            success: function (response) {
                                if (response.status == 200) {
                                    $(".hide-show").show();
                                    $("#firstName").val(response.data.firstName);
                                    $("#lastName").val(response.data.lastName);
                                    $("#firstName").prop("disabled", true);
                                    $("#lastName").prop("disabled", true);
                                    //$("#phoneNumber").removeProp("data-title");
                                    $('input[data-toggle="tooltip"]').tooltip("hide")
                                    $('input[data-toggle="tooltip"]').tooltip("disable")
                                }
                                else {
                                    $("#firstName").val("");
                                    $("#lastName").val("");
                                    $("#productCode").val("");
                                    $("input[name=factorNumber]").val("");
                                    $("input[name=factorPrice]").val("");
                                    $("#firstName").prop("disabled", false);
                                    $("#lastName").prop("disabled", false);
                                    $(".close").focus();
                                    $("#firstName").focus();
                                    $('input[data-toggle="tooltip"]').tooltip("hide")
                                    $('input[data-toggle="tooltip"]').tooltip("disable")
                                }
                                loader(false);
                            }
                        });
                    };
                }
            });
        }

        function load() {
            if (id > 0) {
                loader(true);
                $.get("/customerLoyality/Load/" + id, function (response) {
                    if (response.status == 200) {
                        $("#phoneNumber").prop("disabled", true);

                        var data = response.data;
                        setEntity(response.data, "#form");
                        if (data.productCode) {
                            if (data.productCode != "") {

                                var productCode = data.productCode.split("-");
                                console.log(productCode)
                                for (var i = 0; i < productCode.length; i++) {
                                    var ss = "<span class=\" parent \" >" + productCode[i] + "<i class=\" delete-code fa fa-close \" ></i><input type=\"hidden\" name=\"productCode\" value=\"" + productCode[i] + "\" /></span>";

                                    console.log(i);
                                    $("#appendTo").append(ss);
                                }

                                //$(".parent").find("i").remove()
                            } else {
                                $("#productCode").prop("disabled", true)

                            }
                        }



                        $(".delete-code").on("click", function () {
                            $(this).parent(".parent").remove();
                        });
                        $(".hide-show").show();
                        if (response.data.purchaseType == 0) {
                            $(".buyDate").show();
                            $(".returnDate").hide();
                            $("#reclamation").removeClass("active-reclamation")
                            $("#returnSearch").hide();
                            $("#buySearch").show();
                            $("#buy").addClass("active-buy")
                            $(".input-purchase-buy").show();
                            $(".input-purchase-reclamation").hide();
                            $("#reclamation").prop("disabled", true)
                            productAutoCompelete()
                        }
                        if (response.data.purchaseType == 1) {
                            $("#reclamation").addClass("active-reclamation")
                            $(".buyDate").hide();
                            $(".factorWeight").hide();
                            $(".returnDate").show();
                            $("#buy").removeClass("active-buy")
                            $("#returnSearch").show();
                            $("#buySearch").hide();
                            $(".input-purchase-buy").hide();
                            $(".input-purchase-reclamation").show();
                            $("#buy").prop("disabled", true)
                            $(".parent").find("i").remove()
                            $("#productCode").prop("disabled", true)
                            searchAutoCompelete()
                        }
                        $(".submit-form").show(200);
                        $("#btnSave").show();

                    }
                    else {
                        alert(response.message);
                    }
                    loader(false);
                });
            }
        }

        //     function blinker() {
        //    $('.Reminder').fadeOut(500);
        //    $('.Reminder').fadeIn(500);
        //}
    </script>
}